{% extends 'CatMSAdminBundle::base.html.twig' %}

{% block breadcrumb %}
    {{ parent() }}
    <li><a href="{{ path('media-library') }}">Media library</a></li> <span class="divider">/</span>
    <li class="active">Upload file</li>
{% endblock %}    
    
{% block content -%}    
    <legend>Upload file {% if group is not empty %} - <i>{{ groupEntity.description | raw }}</i> group{% endif %}</legend>
    
    {% if group is not empty and groupEntity is defined and (groupEntity.imageWidth or groupEntity.imageHeight) %}
        
        <div class="alert alert-block">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <h4>Warning!</h4>
            Canvas has dimensions 
            {% if groupEntity.imageWidth %} {{ groupEntity.imageWidth }}px width {% endif %}
            {% if groupEntity.imageWidth and groupEntity.imageHeight %} and {% endif %}
            {% if groupEntity.imageHeight %}{{ groupEntity.imageHeight }}px height{% endif %}. Larger image will be cropped to canvas dimensions.
        </div>

    {% endif %}
    
    <form novalidate action="{{ path('media-library-upload', {'group': group}) }}" method="post" {{ form_enctype(form) }}>
        
        <div class="control-group">
        
            <div class="controls">
                <div class="input-append">
                    <input style="width: 280px;" id="form_name" type="text" maxlength="255" required="required" name="form[name]" placeholder="Filename">
                    <a class="popoverButton" href="#" data-content="Define custom filename allows to identyfing Image/asset by this name. Otherwise filename will be generated automticaly." data-toggle="popover" data-original-title="Filename">
                        <span class="add-on"><i class="icon-question-sign"></i></span>
                    </a>
                </div>
                {{ form_errors(form.name) }}
            </div>
            
            <div class="controls">
                <div class="input-append">
                <input style="width: 280px;" id="form_titl" type="text" maxlength="255" required="required" name="form[title]" placeholder="Image/asset title">
                <a class="popoverButton" href="#" data-content="Image title render into HTML img title attribute." data-toggle="popover" data-original-title="Image/asset title">
                    <span class="add-on"><i class="icon-question-sign"></i></span>
                </a>
                </div>
                {{ form_errors(form.title) }}
            </div>
        
            <div class="controls">
                <div class="input-append">
                <input style="width: 280px;" id="form_prioriy" type="text" maxlength="255" required="required" name="form[priority]" placeholder="Image/asset priority">
                <a class="popoverButton" href="#" data-content="Priority of image display into defined group." data-toggle="popover" data-original-title="Image/asset priority">
                    <span class="add-on"><i class="icon-question-sign"></i></span>
                </a>
                </div>
                {{ form_errors(form.priority) }}
            </div>
            
            <div class="controls">
                <div class="input-append">
                <input style="width: 280px;" id="form_redirect" type="text" maxlength="255" name="form[redirect]" placeholder="Redirect after click">
                <a class="popoverButton" href="#" data-content="Redirect aftter click on image canvas." data-toggle="popover" data-original-title="Redirect after click">
                    <span class="add-on"><i class="icon-question-sign"></i></span>
                </a>
                </div>
                {{ form_errors(form.redirect) }}
            </div>
            
            <div class="controls">
                <div class="input-append">
                <input style="width: 280px;" id="form_slug" type="text" maxlength="255" required="required" name="form[slug]" placeholder="Image/asset slug">
                <a class="popoverButton" href="#" data-content="Image slug is using whlie identyfing and fetching." data-toggle="popover" data-original-title="Image/asset slug">
                    <span class="add-on"><i class="icon-question-sign"></i></span>
                </a>
                </div>
                {{ form_errors(form.slug) }}
            </div>
            
            <div class="controls">
                <span class="btn btn-file"><i class="icon-file"></i> 
                    <input type="file" name="form[file]" id="form_file" />
                </span>    
                {{ form_errors(form.file) }}
            </div>
            
            {% if group is empty %}  
            <script>$(function(){var txt='Undefined';$('#form_imageGroup option').each(function(){if ($(this).text() === txt) {$(this).attr('selected', 'selected');}})});</script>
            <div class="controls" style="margin-top: 15px;">
                <label for="form_imageGroup"><i class="icon-chevron-down"></i> Image/asset group</label>
                {{ form_widget(form.imageGroup, {'attr': {'class': 'span4'}}) }}
                {{ form_errors(form.imageGroup) }}
            </div>
            {% endif %}

            
             {{ form_row(form._token) }}
            
        </div>
        
        <div class="btn-group" style="margin-top: 20px;">
            <a href="{{ path('media-library') }}" class="btn"><i class="icon-list"></i> Back to the list</a>    
            <button class="show-loader btn btn-primary" type="submit"  data-loading-text="Uploading..."><i class="icon-upload"></i> Upload </button>
        </div>
    </form>
    
{% endblock %}