{% extends 'CatMSAdminBundle::base.html.twig' %}

{% block breadcrumb %}
    {{ parent() }}
    <li class="active">Content groups</a>
{% endblock %} 

{% block content -%}
    <legend>Content groups list </legend>

    {% if pagination | length > 0 %}
    <table class="table table-bordered table-hover table-striped">
        <thead>
            <tr>
                <th width=60>{{ knp_pagination_sortable(pagination, 'ID', 'cg.id') }}</th>
                <th>{{ knp_pagination_sortable(pagination, 'Slug', 'cg.slug') }}</th>
                <th>{{ knp_pagination_sortable(pagination, 'Description', 'cg.description') }}</th>
                <th width=40>Manual</th>
                <th width=45>Records</th>
                <th width=90>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for entity in pagination %}
            <tr>
                <td><a href="{{ path('content-group-show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
                <td>{{ entity.slug }}</td>
                <td>{{ entity.description }}</td>
                <td>{% if entity.manual %}<span class="label label-success">YES</span>{% else %}<span class="label label-warning">NO</span>{% endif %}</td>
                <td><span class="label">{{ entity.contents | length }}</span></td>
                <td>
                    <div class="btn-group">
                        <button class="btn">Action</button>
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                        </button>

                        <ul class="dropdown-menu">
                            <li>
                                <a href="{{ path('content-group-show', { 'id': entity.id }) }}"><i class="icon-fullscreen"></i> Show</a>
                            </li>
                            {% if is_granted('ROLE_DEVELOPER') %}
                            <li>
                                <a href="{{ path('content-group-edit', { 'id': entity.id }) }}"><i class="icon-edit"></i> Edit</a>
                            </li>
                            <li>
                                <a href="{{ path('content-manager-new', {'group': entity.slug }) }}"><i class="icon-upload"></i> Add content</a>
                            </li>
                            <li>
                                <a href="{{ path('content-manager-list', {'page': 1, 'slug': entity.slug }) }}"><i class="icon-list"></i> Content list</a>
                            </li>
                            {% endif %}


                            {#
                            <li>
                                <a href="{{ path('media-library', {'page': 1, 'slug': entity.slug}) }}"><i class="icon-list"></i> Image list</a>
                            </li>

                            #}
                        </ul>
                    </div>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    
    <div class="navigation">
        {{ knp_pagination_render(pagination) }}
    </div>
    
    {% else %}
    <div class="alert">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <strong>Empty databse!</strong> No records defined
    </div>
    {% endif %}
    
    <a href="{{ path('content-group-new') }}" class="btn"><i class="icon-pencil"></i> 
        Create a new group
    </a>
    
    {% endblock %}
